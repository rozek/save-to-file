!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(e="undefined"!=typeof globalThis?globalThis:e||self,function(){var r=e.saveToFile,t=e.saveToFile=n();t.noConflict=function(){return e.saveToFile=r,t}}())}(this,(function(){"use strict";function e(e){var n=/^([$a-zA-Z][$a-zA-Z0-9]*):\s*(\S.+)\s*$/.exec(e);if(null==n)throw new Error(e);var r=new Error(n[2]);throw r.name=n[1],r}var n=/^\s*$/;function r(e){return("string"==typeof e||e instanceof String)&&!n.test(e.valueOf())}function t(n,r,t){var i=function(i,s){return function(n,r,t,i,s){if(null==r){if(i)return r;e("MissingArgument: no "+a(n)+" given")}else if(t(r))switch(!0){case r instanceof Boolean:case r instanceof Number:case r instanceof String:return r.valueOf();default:return r}else e("InvalidArgument: the given "+a(n)+" is no valid "+a(s))}(i,s,n,r,t)},s=n.name;return null!=s&&/^ValueIs/.test(s)?function(n,r){null==n&&e("MissingArgument: no function given");"function"!=typeof n&&e("InvalidArgument: the given 1st Argument is not a JavaScript function");null==r&&e("MissingArgument: no desired name given");"string"==typeof r||r instanceof String||e("InvalidArgument: the given desired name is not a string");if(n.name===r)return n;try{if(Object.defineProperty(n,"name",{value:r}),n.name===r)return n}catch(e){}return new Function("originalFunction","return function "+r+" () {return originalFunction.apply(this,Array.prototype.slice.apply(arguments))}")(n)}(i,s.replace(/^ValueIs/,r?"allow":"expect")):i}var i=t(r,false,"non-empty literal string");function a(e){return e.replace(/\\x[0-9a-zA-Z]{2}|\\u[0-9a-zA-Z]{4}|\\[0bfnrtv'"\\\/]?/g,(function(e){return"\\"===e?"\\\\":e})).replace(/[\x00-\x1f\x7f-\x9f]/g,(function(e){switch(e){case"\0":return"\\0";case"\b":return"\\b";case"\f":return"\\f";case"\n":return"\\n";case"\r":return"\\r";case"\t":return"\\t";case"\v":return"\\v";default:var n=e.charCodeAt(0).toString(16);return"\\x"+"00".slice(n.length)+n}}))}var s=require("fs"),u=require("path");function o(e){return e.replace(/[&<>"'\u0000-\u001F\u007F-\u009F\\]/g,(function(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"'":return"&apos;";case"\n":return"\n";case"\\":return"&#92;";default:var n=e.charCodeAt(0).toString(16);return"&#x0000".substring(3,7-n.length)+n+";"}}))}return function(e){i("name of the file to save to",e);var t="",a="",c="",l=/\s*<style(\s[^>]*)?>[\s\S]*?<\/style>/gi,f=/\s*<script(\s[^>]*)?>[\s\S]*?<\/script>/gi;return{markup:function(e){var i,a=e.content;return r(a)&&(t+=a.replace(l,"").replace(f,""),("string"==typeof(i=t)||i instanceof String)&&n.test(i.valueOf())&&(t="")),Promise.resolve({code:a})},script:function(e){var n=e.attributes,t=e.content;if(r(t)){for(var i in a+="<script",n)n.hasOwnProperty(i)&&"lang"!==i&&(a+=" "+i+"="+o(n[i]));a+=">\n",t=t.replace(/^\s*\n/,"").replace(/\n\s*$/,""),a+=t,a+="\n<\/script>\n"}return Promise.resolve({code:t})},style:function(n){var i=n.attributes,l=n.content;if(r(l)){for(var f in c+="<style",i)i.hasOwnProperty(f)&&"lang"!==f&&(c+=" "+f+"="+o(i[f]));c+=">\n",l=l.replace(/^\s*\n/,"").replace(/\n\s*$/,""),c+=l,c+="\n</style>\n"}var g=u.join(process.cwd(),e);return s.mkdirSync(u.dirname(g),{recursive:!0}),s.writeFileSync(g,(""===t?"":t)+(""===a?"":a)+(""===c?"":c)),Promise.resolve({code:l})}}}}));
//# sourceMappingURL=save-to-file.js.map
